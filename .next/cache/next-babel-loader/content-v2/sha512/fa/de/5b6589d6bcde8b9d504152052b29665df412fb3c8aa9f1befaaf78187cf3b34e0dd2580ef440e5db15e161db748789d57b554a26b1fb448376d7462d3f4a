{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/georgegilliland/Desktop/Projects/GraphGenerator/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/georgegilliland/Desktop/Projects/GraphGenerator/components/Visualisations/PieChart/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport * as d3 from \"d3\";\nimport CustomizeDropdown from '../../CustomizeDropdown';\nimport multiColourOptions from \"../../../pages/api/multiColourOptions.json\";\nimport style from '../../../pages/results.module.css';\n\nvar PieChart = function PieChart(_ref) {\n  _s();\n\n  var data = _ref.data;\n\n  var _useState = useState({\n    \"height\": null,\n    \"width\": null,\n    \"canvas\": null,\n    \"scales\": null,\n    \"radius\": null,\n    \"arc\": null,\n    \"color\": null,\n    \"columnOne\": null,\n    \"columnTwo\": null,\n    \"data_ready\": null,\n    \"data\": null\n  }),\n      stateObj = _useState[0],\n      setState = _useState[1]; // Create canvas \n\n\n  var setCanvas = function setCanvas(data) {\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 50,\n      left: 30\n    },\n        width = 400,\n        height = 350;\n    var svg = d3.select(\"#InnerPieChart\").append(\"svg\").attr(\"viewBox\", \"0 0 700 500\").attr('preserveAspectRatio', 'xMinYMin meet').attr('viewBox', '0 0 ' + (width + margin.left + margin.right) + ' ' + (height + margin.top + margin.bottom)).style(\"color\", \"#000000\").append(\"g\").attr(\"transform\", \"translate(\" + 215 + \",\" + 230 + \")\");\n    return svg;\n  }; // Creates pie chart data arcs\n\n\n  var setArcs = function setArcs(canvas, data) {\n    var columnOne = Object.keys(data[0])[0];\n    var columnTwo = Object.keys(data[0])[1];\n    var radius = 200 - 40;\n    var color = d3.scaleOrdinal().domain(data.map(function (d) {\n      return d[columnTwo];\n    })).range([\"#F04C63\", \"#C6C4C4\", \"#51C5DD\", \"#F7F6F6\", \"#0A4F70\"]);\n    var pie = d3.pie().value(function (d) {\n      return d[columnTwo];\n    });\n    var data_ready = pie(data);\n    var arc = d3.arc().innerRadius(radius * 0.5).outerRadius(radius * 0.8);\n    var outerArc = d3.arc().innerRadius(radius * 0.9).outerRadius(radius * 0.9);\n    canvas.selectAll('allSlices').data(data_ready).enter().append('path').attr('d', arc).attr('fill', function (d) {\n      return color(d.data[columnOne]);\n    }).attr(\"stroke\", \"white\").style(\"stroke-width\", \"4px\").style(\"opacity\", 0.7);\n    canvas.selectAll('allPolylines').data(data_ready).enter().append('polyline').attr(\"stroke\", \"black\").style(\"fill\", \"none\").attr(\"stroke-width\", 0.5).attr('points', function (d) {\n      var posA = arc.centroid(d);\n      var posB = outerArc.centroid(d);\n      var posC = outerArc.centroid(d);\n      var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n      posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1);\n      return [posA, posB, posC];\n    });\n    canvas.selectAll('allLabels').data(data_ready).enter().append('text').attr(\"class\", \"pie-labels\").text(function (d) {\n      return d.data[columnOne];\n    }).attr('transform', function (d) {\n      var pos = outerArc.centroid(d);\n      var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n      pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);\n      return 'translate(' + pos + ')';\n    }).style('text-anchor', function (d) {\n      var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n      return midangle < Math.PI ? 'start' : 'end';\n    }); // Update state for update funcations\n\n    var tmpStateObj = _objectSpread({}, stateObj);\n\n    tmpStateObj.canvas = canvas;\n    tmpStateObj.radius = radius;\n    tmpStateObj.arc = arc;\n    tmpStateObj.color = color;\n    tmpStateObj.columnOne = columnOne;\n    tmpStateObj.columnTwo = columnTwo;\n    tmpStateObj.data = data;\n    setState(tmpStateObj);\n  }; // Handles colour updates\n\n\n  var handleDropdownColourChange = function handleDropdownColourChange(val) {\n    var color = d3.scaleOrdinal().domain(stateObj.data.map(function (d) {\n      return d[stateObj.columnTwo];\n    })).range(val.split(\",\"));\n    stateObj.canvas.selectAll('path').transition().duration(500).style('fill', function (d) {\n      return color(d.data[stateObj.columnOne]);\n    });\n  }; // Handles radius size updates\n\n\n  var handleInnerRadiusChange = function handleInnerRadiusChange(val) {\n    var arc = d3.arc().innerRadius(stateObj.radius * val).outerRadius(stateObj.radius * 0.8);\n    stateObj.canvas.selectAll(\"path\").attr('d', arc);\n  }; // Once component has mounted, this prevents the graph from being repeatedly displayed\n\n\n  useEffect(function () {\n    if (data) {\n      var canvas = setCanvas(JSON.parse(data));\n      setArcs(canvas, JSON.parse(data));\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.Chart,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.GraphTitle,\n      children: \"Pie-Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"InnerPieChart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.ButtonContainer,\n      children: /*#__PURE__*/_jsxDEV(CustomizeDropdown, {\n        handleDropdownChange: handleDropdownColourChange,\n        data: multiColourOptions.options,\n        type: \"colour\",\n        text: \"Change Colour\",\n        width: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(PieChart, \"Sp8uhoU14Gcp5KJ2O6vjpgl0vnk=\");\n\n_c = PieChart;\nexport default PieChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"PieChart\");","map":{"version":3,"sources":["/Users/georgegilliland/Desktop/Projects/GraphGenerator/components/Visualisations/PieChart/index.js"],"names":["React","useState","useEffect","d3","CustomizeDropdown","multiColourOptions","style","PieChart","data","stateObj","setState","setCanvas","margin","top","right","bottom","left","width","height","svg","select","append","attr","setArcs","canvas","columnOne","Object","keys","columnTwo","radius","color","scaleOrdinal","domain","map","d","range","pie","value","data_ready","arc","innerRadius","outerRadius","outerArc","selectAll","enter","posA","centroid","posB","posC","midangle","startAngle","endAngle","Math","PI","text","pos","tmpStateObj","handleDropdownColourChange","val","split","transition","duration","handleInnerRadiusChange","JSON","parse","Chart","GraphTitle","ButtonContainer","options"],"mappings":"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","sourcesContent":["import React, { useState, useEffect }  from 'react';\nimport * as d3 from \"d3\";\nimport CustomizeDropdown from '../../CustomizeDropdown';\nimport multiColourOptions from \"../../../pages/api/multiColourOptions.json\"\nimport style from '../../../pages/results.module.css';\n\nconst PieChart = ({data}) => {\n\n    const [stateObj, setState] = useState({\n        \"height\": null,\n        \"width\": null,\n        \"canvas\": null,\n        \"scales\": null,\n        \"radius\": null, \n        \"arc\": null,\n        \"color\": null,\n        \"columnOne\": null,\n        \"columnTwo\": null,\n        \"data_ready\": null,\n        \"data\": null\n    });\n\n     // Create canvas \n    const setCanvas = (data) => {\n        const margin = {top: 30, right: 30, bottom: 50, left: 30},\n        width = 400,\n        height = 350;\n        \n        let svg = d3\n            .select(\"#InnerPieChart\")\n            .append(\"svg\")\n                .attr(\"viewBox\", \"0 0 700 500\")\n                .attr('preserveAspectRatio', 'xMinYMin meet')\n                .attr(\n                    'viewBox',\n                    '0 0 ' +\n                    (width + margin.left + margin.right) +\n                    ' ' +\n                    (height + margin.top + margin.bottom)\n                )\n                .style(\"color\", \"#000000\") \n                .append(\"g\")\n                .attr(\"transform\", \"translate(\" + 215 + \",\" + 230 + \")\");\n\n        return svg;\n    }\n\n    // Creates pie chart data arcs\n    const setArcs = (canvas, data) => {\n        let columnOne = Object.keys(data[0])[0];\n        let columnTwo = Object.keys(data[0])[1];\n        let radius = 200 - 40;\n\n        let color = d3.scaleOrdinal()\n            .domain(data.map(function(d){\n                return d[columnTwo];\n            }))\n            .range([\"#F04C63\",\"#C6C4C4\",\"#51C5DD\",\"#F7F6F6\",\"#0A4F70\"]);\n\n        let pie = d3.pie()\n            .value(function(d) { return d[columnTwo]; });\n\n        let data_ready = pie(data);\n\n        let arc = d3.arc()\n            .innerRadius(radius * 0.5)\n            .outerRadius(radius * 0.8);\n      \n        let outerArc = d3.arc()\n            .innerRadius(radius * 0.9)\n            .outerRadius(radius * 0.9);\n\n        canvas\n            .selectAll('allSlices')\n            .data(data_ready)\n            .enter()\n            .append('path')\n            .attr('d', arc)\n            .attr('fill', function(d){ return(color(d.data[columnOne])) })\n            .attr(\"stroke\", \"white\")\n            .style(\"stroke-width\", \"4px\")\n            .style(\"opacity\", 0.7)\n\n        canvas\n            .selectAll('allPolylines')\n            .data(data_ready)\n            .enter()\n            .append('polyline')\n                .attr(\"stroke\", \"black\")\n                .style(\"fill\", \"none\")\n                .attr(\"stroke-width\", 0.5)\n                .attr('points', function(d) {\n                    let posA = arc.centroid(d) \n                    let posB = outerArc.centroid(d) \n                    let posC = outerArc.centroid(d)\n                    let midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 \n                    posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); \n                    return [posA, posB, posC]\n                })   \n\n        canvas\n            .selectAll('allLabels')\n            .data(data_ready)\n            .enter()\n            .append('text')\n                .attr(\"class\", \"pie-labels\")\n                .text( function(d) { return d.data[columnOne] } )\n                .attr('transform', function(d) {\n                    let pos = outerArc.centroid(d);\n                    let midangle = d.startAngle + (d.endAngle - d.startAngle) / 2\n                    pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);\n                    return 'translate(' + pos + ')';\n                })\n                .style('text-anchor', function(d) {\n                    let midangle = d.startAngle + (d.endAngle - d.startAngle) / 2\n                    return (midangle < Math.PI ? 'start' : 'end')\n                })\n\n        // Update state for update funcations\n        let tmpStateObj = {...stateObj};\n        tmpStateObj.canvas = canvas;\n        tmpStateObj.radius = radius;\n        tmpStateObj.arc = arc;\n        tmpStateObj.color = color;\n        tmpStateObj.columnOne = columnOne;\n        tmpStateObj.columnTwo = columnTwo;\n        tmpStateObj.data = data;\n        setState(tmpStateObj)\n    }\n\n    // Handles colour updates\n    const handleDropdownColourChange = (val) => {\n\n        let color = d3.scaleOrdinal()\n            .domain(stateObj.data.map(function(d){\n                return d[stateObj.columnTwo];\n            }))\n            .range(val.split(\",\"));\n        \n        stateObj.canvas.selectAll('path')\n                .transition()\n                .duration(500)\n                .style('fill', function(d){ return(color(d.data[stateObj.columnOne])) })\n    }\n\n    // Handles radius size updates\n    const handleInnerRadiusChange = (val) => {\n        let arc = d3.arc()\n            .innerRadius(stateObj.radius * val) \n            .outerRadius(stateObj.radius * 0.8);\n\n        stateObj.canvas\n            .selectAll(\"path\")\n            .attr('d',arc);\n    }\n\n    // Once component has mounted, this prevents the graph from being repeatedly displayed\n    useEffect(() => {\n        if (data) {\n            let canvas = setCanvas(JSON.parse(data));\n            setArcs(canvas, JSON.parse(data));\n        }\n    }, [data]);\n\n    return (\n        <div className={style.Chart}>\n            <div className={style.GraphTitle}>\n                Pie-Chart\n            </div>\n            <div id=\"InnerPieChart\"></div>\n            <div className={style.ButtonContainer}>\n            <CustomizeDropdown handleDropdownChange={handleDropdownColourChange} \n                data={multiColourOptions.options} type=\"colour\" text=\"Change Colour\" width={\"200px\"}/>\n            </div>\n        </div>\n    )\n};\n\nexport default PieChart;\n"]},"metadata":{},"sourceType":"module"}